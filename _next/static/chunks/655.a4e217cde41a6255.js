"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[655],{9437:function(a,b,c){c.r(b),c.d(b,{"default":function(){return ka}});var d=c(4051),e=c.n(d),f=c(5893),g=c(2648),h=c(2241),i=c(786),j=c(6421),k=c.n(j);c(1948);var l=c(7494),m=c(8683),n=c(1090),o=c(5963),p=c(4570),q=c(188),r=c(7517),s=c(8734),t=c(1162),u=c(2482);c(9440);var v=c(1053),w=c(8125),x=c(9261),y=c(3376),z=c(7539),A=c(1345),B=c(8958),C=c(283),D=c(7294),E=c(517),F=c(4178),G=c(7594),H=c(9334),I=c(8828),J=c(1006),K=function(a){var b=a.contextMenu,c=a.setContextMenu,d=a.contextMenuFeaturesData,e=a.setRepeaterInfo;return(0,f.jsx)(f.Fragment,{children:null!==b&&(0,f.jsxs)(E.Z,{className:"ContextMenu",open:null!==b,onClose:function(){c(null)},anchorReference:"anchorPosition",sx:{position:"fixed",zIndex:1200},anchorPosition:{top:Math.floor(b.mouseY),left:Math.floor(b.mouseX)},defaultChecked:!1,defaultValue:void 0,children:[(0,f.jsx)(F.Z,{disabled:!0,children:"중계기"}),d.map(function(a,b){return(0,f.jsxs)(F.Z,{onClick:function(){c(null),e(a)},children:[(0,f.jsx)(G.Z,{children:"광역망"===a.Type?(0,f.jsx)(J.Z,{}):(0,f.jsx)(I.Z,{})}),(0,f.jsx)(H.Z,{primary:"".concat(a.Type," ").concat(null==a?void 0:a.Name," (CallSign: ").concat(a.Callsign,")"),secondary:"Tx:".concat(a.Tx,", Rx:").concat(a.Rx,", Tone: ").concat(a.Tone)})]},b)})]})})},L=c(5393),M=c(1280),N=function(a,b){if(null===a||!b)return new z.ZP();var c=a.get("features").length,d=(c>0?a.get("features")[0].getProperties():"").Callsign;return new z.ZP({image:b>300?new C.Z({radius:14,fill:new A.Z({color:c>30?"#ff3333D0":c>10?"#ffcc33D0":"#33cc33D0"}),stroke:new B.Z({color:"#fff",width:1})}):new L.Z({points:3,radius:12,fill:new A.Z({color:"#33cc33D0"}),stroke:new B.Z({color:"#fff",width:1})}),text:new M.Z(b>300?{text:"".concat(c.toString()),fill:new A.Z({color:"#fff"}),stroke:new B.Z({color:"#000",width:2}),font:"bold 14px Arial",textAlign:"center",textBaseline:"middle"}:{text:d||"",fill:new A.Z({color:"#ffcc33"}),stroke:new B.Z({color:"#000",width:3}),offsetY:-15,font:"bold 14px \"Malgun Gothic\", \"Apple Gothic\", sans-serif",textAlign:"center",textBaseline:"middle"})})},O=function(a,b){var c=a.getProperties(),d=c.Name;return(c.Callsign,null!==a&&b)?[new z.ZP({image:new L.Z({points:6,radius:12,fill:new A.Z({color:"#ff3333"}),stroke:new B.Z({color:"#fff",width:1})}),text:new M.Z({text:"광",fill:new A.Z({color:"#FFFFFF"}),stroke:new B.Z({color:"#000",width:3}),offsetY:1,font:"bold 14px \"Apple Gothic\", \"Malgun Gothic\",  sans-serif",textAlign:"center",textBaseline:"middle"})}),new z.ZP({text:new M.Z({text:d?"".concat(d):"",fill:new A.Z({color:"#ff6666"}),stroke:new B.Z({color:"#000",width:3}),offsetY:22,font:"bold 14px \"Apple Gothic\", \"Malgun Gothic\",  sans-serif",textAlign:"center",textBaseline:"middle"})})]:new z.ZP()},P=function(a,b){var c=a.get("features")[0].getProperties().Name;return new z.ZP({image:new C.Z({radius:10,fill:new A.Z({color:"#00ff00a0"}),stroke:new B.Z({color:"#ff0000",width:2})}),text:new M.Z({text:c||"",fill:new A.Z({color:"#00ff00"}),stroke:new B.Z({color:"#ff0000",width:3}),offsetY:-20,font:"bold 20px \"Malgun Gothic\", \"Apple Gothic\", sans-serif",textAlign:"center",textBaseline:"middle"}),fill:new A.Z({color:"#eeeeee"}),stroke:new B.Z({color:"rgba(255, 255, 255, 0.7)",width:2})})},Q=function(a,b){var c=a.get("COLOR")||"#eeeeee",d=P(a,b);return d.getFill().setColor(c),d},R=c(657),S=c(7645),T=c(6514),U=c(2882),V=c(5113),W=c(7906),X=c(295),Y=c(3816),Z=c(3252),$=c(7918),_=c(1425),aa=c(3321);function ba(a){var b=a.open,c=a.repeaterInfo,d=a.onClose,e=D.useMemo(function(){return(null==c?void 0:c.Tx)&&(null==c?void 0:c.Rx)?(null==c?void 0:c.Tx)-(null==c?void 0:c.Rx):0},[c]);return(0,f.jsxs)(R.Z,{open:b,onClose:d,children:[(0,f.jsxs)(S.Z,{children:[null==c?void 0:c.Name," ",null==c?void 0:c.Callsign]}),(0,f.jsx)(T.Z,{children:(0,f.jsx)(U.Z,{component:V.Z,elevation:1,children:(0,f.jsx)(W.Z,{children:(0,f.jsxs)(X.Z,{children:[(0,f.jsxs)(Y.Z,{children:[(0,f.jsx)(Z.Z,{component:"th",scope:"row",children:"Tx"}),(0,f.jsxs)(Z.Z,{children:[null==c?void 0:c.Tx," Mhz"]})]}),(0,f.jsxs)(Y.Z,{children:[(0,f.jsx)(Z.Z,{component:"th",scope:"row",children:"Rx"}),(0,f.jsxs)(Z.Z,{children:[null==c?void 0:c.Rx," Mhz"]})]}),(0,f.jsxs)(Y.Z,{children:[(0,f.jsx)(Z.Z,{component:"th",scope:"row",children:"Shift"}),(0,f.jsx)(Z.Z,{children:(0,f.jsx)($.Z,{size:"small",color:"primary",label:e>0?"+".concat(e.toFixed(2)):e.toFixed(2)})})]}),(0,f.jsxs)(Y.Z,{children:[(0,f.jsx)(Z.Z,{component:"th",scope:"row",children:"톤"}),(0,f.jsx)(Z.Z,{children:null==c?void 0:c.Tone})]}),(0,f.jsxs)(Y.Z,{children:[(0,f.jsx)(Z.Z,{component:"th",scope:"row",children:"유형"}),(0,f.jsx)(Z.Z,{children:(0,f.jsx)($.Z,{size:"small",color:"secondary",label:null==c?void 0:c.Type})})]}),(0,f.jsxs)(Y.Z,{children:[(0,f.jsx)(Z.Z,{component:"th",scope:"row",children:"주소"}),(0,f.jsx)(Z.Z,{children:null==c?void 0:c.Address})]}),(0,f.jsxs)(Y.Z,{children:[(0,f.jsx)(Z.Z,{component:"th",scope:"row",children:"비고"}),(0,f.jsx)(Z.Z,{children:null==c?void 0:c.Note})]})]})})})}),(0,f.jsx)(_.Z,{children:(0,f.jsx)(aa.Z,{onClick:d,children:"닫기"})})]})}function ca(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=new Array(b);c<b;c++)d[c]=a[c];return d}function da(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}function ea(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){da(f,d,e,g,h,"next",a)}function h(a){da(f,d,e,g,h,"throw",a)}g(void 0)})}}function fa(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function ga(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){fa(a,b,c[b])})}return a}function ha(a,b){return(function(a){if(Array.isArray(a))return a})(a)||(function(a,b){var c,d,e=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=e){var f=[],g=!0,h=!1;try{for(e=e.call(a);!(g=(c=e.next()).done)&&(f.push(c.value),!b||f.length!==b);g=!0);}catch(i){h=!0,d=i}finally{try{g||null==e.return||e.return()}finally{if(h)throw d}}return f}})(a,b)||ja(a,b)||(function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function ia(a){return(function(a){if(Array.isArray(a))return ca(a)})(a)||(function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)})(a)||ja(a)||(function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function ja(a,b){if(a){if("string"==typeof a)return ca(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c)return Array.from(c);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return ca(a,b)}}var ka=function(){var a=ha(D.useState({open:!1,repeaterInfo:void 0}),2),b=a[0],c=a[1],d=ha(D.useState(),2),j=d[0],E=d[1],F=ha(D.useState(void 0),2),G=F[0],H=F[1],I=ha(D.useState(void 0),2),J=I[0],L=I[1],M=ha(D.useState([]),2),P=M[0],R=M[1],S=ha(D.useState(null),2),T=S[0],U=S[1],V=ha(D.useState(),2),W=V[0],X=V[1],Y=ha(D.useState(),2),Z=Y[0],$=Y[1];return D.useEffect(function(){var a=new h.ZP({center:(0,v.mi)([126.9388092,37.4355672]),zoom:6,maxZoom:19}),b=new p.Z({trackingOptions:{enableHighAccuracy:!0},projection:a.getProjection()});b.setTracking(!0);var c=new n.Z();b.on("change:accuracyGeometry",function(){c.setGeometry(b.getAccuracyGeometry()||void 0)});var d=new n.Z();d.setStyle(new z.ZP({image:new C.Z({radius:6,fill:new A.Z({color:"#3399CC"}),stroke:new B.Z({color:"#fff",width:2})})})),b.on("change:position",function(){var a=b.getPosition();d.setGeometry(a?new q.Z(a):void 0)});var f=new u.Z({source:new y.Z({features:[c,d]}),zIndex:1000}),j=new s.default({title:"지역망 중계기",layers:[]}),m=new s.default({title:"광역망 중계기",layers:[]});X(j),$(m);var o=new i.Z({target:"map",layers:[new s.default({title:"Base maps",layers:[new s.default({title:"OSM",type:"base",combine:!0,visible:!0,layers:[new t.Z({source:new w.Z({url:"https://tile.osmand.net/hd/{z}/{x}/{y}.png",crossOrigin:null,tilePixelRatio:2,maxZoom:19,tileSize:256,attributionsCollapsible:!1})})]}),]}),new s.default({title:"GPS 본인 위치",layers:[f]}),new s.default({title:"중계기",layers:[j,m]}),],view:a});o.addControl(new l.Z({units:"metric"}));var r,x,D=new(k())({reverse:!1,groupSelectStyle:"children",startActive:!0,activationMode:"click"});o.addControl(D),E(o),fetch("data/repeater.csv").then((r=ea(e().mark(function a(b){var c,d;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.text();case 2:(c=a.sent)&&H(d=(0,g.Z)(c));case 4:case"end":return a.stop()}},a)})),function(a){return r.apply(this,arguments)})),fetch("data/wa_link.json").then((x=ea(e().mark(function a(b){var c;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.json();case 2:(c=a.sent)&&L(c);case 4:case"end":return a.stop()}},a)})),function(a){return x.apply(this,arguments)}))},[]),D.useEffect(function(){if(j&&J&&J.features){var a=new y.Z({features:new o.Z({dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}).readFeatures(J)}),b=new u.Z({source:a,style:new z.ZP({stroke:new B.Z({color:"#ff3333",width:3})}),zIndex:100});Z&&Z.getLayers().push(b)}}),D.useEffect(function(){if(j&&G){var a=ga({},G),b=ga({},G);void 0!==a.features&&(a.features=a.features.filter(function(a){var b;return(null==a?void 0:null===(b=a.properties)|| void 0===b?void 0:b.Type)!=="광역망"})),void 0!==b.features&&(b.features=b.features.filter(function(a){var b;return(null==a?void 0:null===(b=a.properties)|| void 0===b?void 0:b.Type)==="광역망"}));var c=new u.Z({source:new x.Z({source:new y.Z({features:new o.Z({dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}).readFeatures(a)})}),style:N,zIndex:200}),d=new u.Z({source:new y.Z({features:new o.Z({dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}).readFeatures(b)}),style:O,zIndex:300});W&&W.getLayers().push(c),Z&&Z.getLayers().push(d);var e=new r.Z({condition:m.V4,layers:[c,d],multi:!0,hitTolerance:10,style:Q});j.addInteraction(e);var f=function(a){if(a.selected.length>0){var b=ha(a.mapBrowserEvent.pixel,2),c=b[0],d=b[1],f=[];a.selected.forEach(function(a){var b,c;void 0!==a.getProperties().features?(b=f).push.apply(b,ia(a.getProperties().features.map(function(a){return a.getProperties()}))):a.length>0?(c=f).push.apply(c,ia(a.map(function(a){return a.getProperties()}))):f.push(a.getProperties())}),a.preventDefault(),R(f),U(null===T?{mouseX:c,mouseY:d}:null),e.getFeatures().clear()}};e.on("select",f)}},[j,G]),(0,f.jsxs)("div",{id:"map",style:{width:"100%",height:"100%"},children:[(0,f.jsx)(K,{contextMenu:T,setContextMenu:U,contextMenuFeaturesData:P,setRepeaterInfo:function(a){c({open:!0,repeaterInfo:a})}}),(0,f.jsx)(ba,{open:b.open,onClose:function(){return c(ga({},b,{open:!1}))},repeaterInfo:b.repeaterInfo})]})}}}])