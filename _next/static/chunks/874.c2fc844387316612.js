"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[874],{9690:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var r=n(4051),o=n.n(r),i=n(5893),a=n(2648),l=n(2241),c=n(786),u=n(6421),s=n.n(u),f=(n(1948),n(7494)),d=n(8683),w=n(1090),h=n(5963),p=n(4570),m=n(188),y=n(7517),v=n(8734),Z=n(1162),x=n(2482),g=(n(9440),n(1053)),b=n(8125),S=n(9261),P=n(3376),A=n(7539),k=n(1345),C=n(8958),j=n(7890),M=n(7294),G=n(6525),E=n(9840),I=n(9334),O=function(e){var t=e.contextMenu,n=e.setContextMenu,r=e.contextMenuFeaturesData;return(0,i.jsx)(i.Fragment,{children:null!==t&&(0,i.jsx)(G.Z,{className:"ContextMenu",open:!0,onClose:function(){n(null)},anchorReference:"anchorPosition",sx:{position:"fixed",zIndex:1200},anchorPosition:{top:Math.floor(t.mouseY),left:Math.floor(t.mouseX)},children:r.map((function(e,t){return(0,i.jsx)(E.Z,{onClick:function(){n(null)},children:(0,i.jsx)(I.Z,{primary:"".concat(e.Name," (CallSign: ").concat(e.Callsign,")"),secondary:"Tx:".concat(e.Tx,", Rx:").concat(e.Rx,", Tone: ").concat(e.Tone)})},t)}))})})},T=n(1280),N=function(e,t){if(null!==e&&t){var n=e.get("features").length,r=(n>0?e.get("features")[0].getProperties():"").Name;return new A.ZP({image:t>300?new j.Z({radius:14,fill:new k.Z({color:n>30?"#ff3333D0":n>10?"#ffcc33D0":"#33cc33D0"}),stroke:new C.Z({color:"#fff",width:1})}):new j.Z({radius:5,fill:new k.Z({color:"#ff3333"}),stroke:new C.Z({color:"#fff",width:1})}),text:t>300?new T.Z({text:"".concat(n.toString()),fill:new k.Z({color:"#fff"}),stroke:new C.Z({color:"#000",width:2}),font:"bold 14px Arial",textAlign:"center",textBaseline:"middle"}):new T.Z({text:r||"",fill:new k.Z({color:"#ffcc33"}),stroke:new C.Z({color:"#000",width:3}),offsetY:-15,font:'bold 14px "Malgun Gothic", "Apple Gothic", sans-serif',textAlign:"center",textBaseline:"middle"})})}return new A.ZP},z=function(e,t){var n=e.get("COLOR")||"#eeeeee",r=function(e,t){var n=e.get("features")[0].getProperties().Name;return new A.ZP({image:new j.Z({radius:10,fill:new k.Z({color:"#00ff00a0"}),stroke:new C.Z({color:"#ff0000",width:2})}),text:new T.Z({text:n||"",fill:new k.Z({color:"#00ff00"}),stroke:new C.Z({color:"#ff0000",width:3}),offsetY:-20,font:'bold 20px "Malgun Gothic", "Apple Gothic", sans-serif',textAlign:"center",textBaseline:"middle"}),fill:new k.Z({color:"#eeeeee"}),stroke:new C.Z({color:"rgba(255, 255, 255, 0.7)",width:2})})}(e);return r.getFill().setColor(n),r};function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(u){return void n(u)}l.done?t(c):Promise.resolve(c).then(r,o)}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){l=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||Y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){if(e){if("string"===typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}var _=function(){var e=F(M.useState(),2),t=e[0],n=e[1],r=F(M.useState(void 0),2),u=r[0],G=r[1],E=F(M.useState([]),2),I=E[0],T=E[1],B=F(M.useState(null),2),Y=B[0],_=B[1],L=F(M.useState(),2),X=L[0],H=L[1];return M.useEffect((function(){var e=new l.ZP({center:(0,g.mi)([126.9388092,37.4355672]),zoom:6,maxZoom:19}),t=new p.Z({trackingOptions:{enableHighAccuracy:!0},projection:e.getProjection()});t.setTracking(!0);var r=new w.Z;t.on("change:accuracyGeometry",(function(){r.setGeometry(t.getAccuracyGeometry()||void 0)}));var i=new w.Z;i.setStyle(new A.ZP({image:new j.Z({radius:6,fill:new k.Z({color:"#3399CC"}),stroke:new C.Z({color:"#fff",width:2})})})),t.on("change:position",(function(){var e=t.getPosition();i.setGeometry(e?new m.Z(e):void 0)}));var u=new x.Z({source:new P.Z({features:[r,i]}),zIndex:1e3}),d=new v.default({title:"\uc911\uacc4\uae30",layers:[]});H(d);var h=new c.Z({target:"map",layers:[new v.default({title:"Base maps",layers:[new v.default({title:"OSM",type:"base",combine:!0,visible:!0,layers:[new Z.Z({source:new b.Z({url:"https://tile.osmand.net/hd/{z}/{x}/{y}.png",crossOrigin:null,tilePixelRatio:2,maxZoom:19,tileSize:256,attributionsCollapsible:!1})})]})]}),new v.default({title:"GPS \ubcf8\uc778 \uc704\uce58",layers:[u]}),d],view:e});h.addControl(new f.Z({units:"metric"}));var y={reverse:!0,groupSelectStyle:"children",startActive:!0,activationMode:"click"},S=new(s())(y);h.addControl(S),n(h),fetch("data/repeater.csv").then(function(){var e,t=(e=o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:(n=e.sent)&&(r=(0,a.Z)(n),G(r));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){D(i,r,o,a,l,"next",e)}function l(e){D(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}())}),[]),M.useEffect((function(){if(t&&u){var e=new x.Z({source:new S.Z({source:new P.Z({features:new h.Z({dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}).readFeatures(u)})}),style:N});X&&X.getLayers().push(e);var n=new y.Z({condition:d.V4,layers:[e],multi:!0,style:z});t.addInteraction(n);n.on("select",(function(e){if(e.selected.length>0){var t=F(e.mapBrowserEvent.pixel,2),n=t[0],r=t[1],o=[];e.selected.forEach((function(e){var t;(t=o).push.apply(t,R(e.getProperties().features.map((function(e){return e.getProperties()}))))}));T(o),_(null===Y?{mouseX:n,mouseY:r}:null)}}))}}),[t,u]),(0,i.jsx)("div",{id:"map",style:{width:"100%",height:"100%"},children:(0,i.jsx)(O,{contextMenu:Y,setContextMenu:_,contextMenuFeaturesData:I})})}}}]);