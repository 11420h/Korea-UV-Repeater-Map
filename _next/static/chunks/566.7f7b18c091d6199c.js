"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{3145:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ze}});var r=n(4051),o=n.n(r),i=n(5893),l=n(2648),a=n(8326),c=n(8775),s=n(1053);function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return!t||"object"!==v(t)&&"function"!==typeof t?u(e):t}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}var x=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(i,e);var t,n,r,o=w(i);function i(e){var t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=e||{},l=document.createElement("button");l.innerHTML='<i class="fa-solid fa-crosshairs"></i>';var c=document.createElement("div");return c.className="currentPosition ol-unselectable ol-control control-hidden",c.appendChild(l),(t=o.call(this,{element:c,target:r.target})).geoPosition=new a.Z({trackingOptions:{enableHighAccuracy:!0},projection:null===(n=t.getMap())||void 0===n?void 0:n.getView().getProjection()}),t.geoPosition.setTracking(!0),t.geoPosition.on("change:position",(function(){t.currentPosition=t.geoPosition.getPosition(),c.classList.remove("control-hidden")})),l.addEventListener("click",t.handleMoveToMyPosition.bind(u(t)),!1),t}return t=i,(n=[{key:"handleMoveToMyPosition",value:function(){var e,t,n;void 0!==this.currentPosition&&(null===(t=null===(e=null===this||void 0===this?void 0:this.getMap())||void 0===e?void 0:e.getView())||void 0===t||t.setCenter((0,s.mi)(this.currentPosition)),null===(n=null===this||void 0===this?void 0:this.getMap())||void 0===n||n.getView().setZoom(15))}}])&&f(t.prototype,n),r&&f(t,r),i}(c.default),y=n(2241),Z=n(2887),m=n(6421),g=n.n(m),b=(n(1948),n(5743)),j=n(7494),P=n(8683),S=n(1090),k=n(5963),C=n(188),M=n(7517),O=n(8734),A=n(1162),T=n(2482),E=(n(9440),n(8125)),G=n(9261),F=n(3376),I=n(7539),R=n(1345),_=n(8958),z=n(283),B=n(7294),N=n(7850),D=n(8972),L=n(7594),Y=n(9334),V=n(8828),H=n(1006),X=function(e){var t=e.contextMenu,n=e.setContextMenu,r=e.contextMenuFeaturesData,o=e.setRepeaterInfo;return(0,i.jsx)(i.Fragment,{children:null!==t&&(0,i.jsxs)(N.Z,{className:"ContextMenu",open:null!==t,onClose:function(){n(null)},anchorReference:"anchorPosition",sx:{position:"fixed",zIndex:1200},anchorPosition:{top:Math.floor(t.mouseY),left:Math.floor(t.mouseX)},defaultChecked:!1,defaultValue:void 0,children:[(0,i.jsx)(D.Z,{disabled:!0,children:"\uc911\uacc4\uae30"}),r.map((function(e,t){return(0,i.jsxs)(D.Z,{onClick:function(){n(null),o(e)},children:[(0,i.jsx)(L.Z,{children:"\uad11\uc5ed\ub9dd"===e.Type?(0,i.jsx)(H.Z,{}):(0,i.jsx)(V.Z,{})}),(0,i.jsx)(Y.Z,{primary:"".concat(e.Type," ").concat(null===e||void 0===e?void 0:e.Name," (CallSign: ").concat(e.Callsign,")"),secondary:"Tx:".concat(e.Tx,", Rx:").concat(e.Rx,", Tone: ").concat(e.Tone)})]},t)}))]})})},U=n(5393),W=n(1280),$=function(e,t){if(null!==e&&t){var n=e.get("features").length,r=(n>0?e.get("features")[0].getProperties():"").Callsign;return new I.ZP({image:t>300?new z.Z({radius:14,fill:new R.Z({color:n>30?"#ff3333D0":n>10?"#ffcc33D0":"#33cc33D0"}),stroke:new _.Z({color:"#fff",width:1})}):new U.Z({points:3,radius:12,fill:new R.Z({color:"#33cc33D0"}),stroke:new _.Z({color:"#fff",width:1})}),text:t>300?new W.Z({text:"".concat(n.toString()),fill:new R.Z({color:"#fff"}),stroke:new _.Z({color:"#000",width:2}),font:"bold 14px Arial",textAlign:"center",textBaseline:"middle"}):new W.Z({text:r||"",fill:new R.Z({color:"#ffcc33"}),stroke:new _.Z({color:"#000",width:3}),offsetY:-15,font:'bold 14px Pretendard, "Malgun Gothic", "Apple Gothic", sans-serif',textAlign:"center",textBaseline:"middle"})})}return new I.ZP},q=function(e,t){var n=e.getProperties(),r=n.Name;n.Callsign;return null!==e&&t?[new I.ZP({image:new U.Z({points:6,radius:12,fill:new R.Z({color:"#ff3333"}),stroke:new _.Z({color:"#fff",width:1})}),text:new W.Z({text:"\uad11",fill:new R.Z({color:"#FFFFFF"}),stroke:new _.Z({color:"#000",width:3}),offsetY:1,font:'bold 14px Pretendard, "Apple Gothic", "Malgun Gothic",  sans-serif',textAlign:"center",textBaseline:"middle"})}),new I.ZP({text:new W.Z({text:r?"".concat(r):"",fill:new R.Z({color:"#ff6666"}),stroke:new _.Z({color:"#000",width:3}),offsetY:22,font:'bold 14px Pretendard, "Apple Gothic", "Malgun Gothic",  sans-serif',textAlign:"center",textBaseline:"middle"})})]:new I.ZP},J=function(e,t){var n=e.get("COLOR")||"#eeeeee",r=function(e,t){var n=e.get("features")[0].getProperties().Name;return new I.ZP({image:new z.Z({radius:10,fill:new R.Z({color:"#00ff00a0"}),stroke:new _.Z({color:"#ff0000",width:2})}),text:new W.Z({text:n||"",fill:new R.Z({color:"#00ff00"}),stroke:new _.Z({color:"#ff0000",width:3}),offsetY:-20,font:'bold 20px "Malgun Gothic", "Apple Gothic", sans-serif',textAlign:"center",textBaseline:"middle"}),fill:new R.Z({color:"#eeeeee"}),stroke:new _.Z({color:"rgba(255, 255, 255, 0.7)",width:2})})}(e);return r.getFill().setColor(n),r},K=n(2734),Q=n(657),ee=n(7645),te=n(7918),ne=n(5861),re=n(6514),oe=n(7906),ie=n(295),le=n(3816),ae=n(3252),ce=n(1425),se=n(3321);function ue(e){var t=e.open,n=e.repeaterInfo,r=e.onClose,o=(0,K.Z)(),l=B.useMemo((function(){return(null===n||void 0===n?void 0:n.Tx)&&(null===n||void 0===n?void 0:n.Rx)?(null===n||void 0===n?void 0:n.Tx)-(null===n||void 0===n?void 0:n.Rx):0}),[n]);return(0,i.jsxs)(Q.Z,{open:t,onClose:r,maxWidth:"md",children:[(0,i.jsxs)(ee.Z,{sx:{backgroundColor:o.palette.primary.main},children:[(0,i.jsx)(te.Z,{size:"small",color:"secondary",label:null===n||void 0===n?void 0:n.Type}),(0,i.jsxs)(ne.Z,{variant:"h5",sx:{display:"inline-flex",mx:2,color:o.palette.getContrastText(o.palette.primary.main)},children:[null===n||void 0===n?void 0:n.Name," ",null===n||void 0===n?void 0:n.Callsign]})]}),(0,i.jsx)(re.Z,{dividers:!0,children:(0,i.jsx)(oe.Z,{children:(0,i.jsxs)(ie.Z,{children:[(0,i.jsxs)(le.Z,{children:[(0,i.jsx)(ae.Z,{component:"th",scope:"row",children:"\uc218\uc2e0(Rx)"}),(0,i.jsxs)(ae.Z,{children:[null===n||void 0===n?void 0:n.Rx," Mhz"]}),(0,i.jsx)(ae.Z,{component:"th",scope:"row",children:"\uc1a1\uc2e0(Tx)"}),(0,i.jsxs)(ae.Z,{children:[null===n||void 0===n?void 0:n.Tx," Mhz"]})]}),(0,i.jsxs)(le.Z,{children:[(0,i.jsx)(ae.Z,{component:"th",scope:"row",children:"Shift"}),(0,i.jsx)(ae.Z,{children:(0,i.jsx)(te.Z,{size:"small",color:"primary",label:l>0?"+".concat(l.toFixed(2)):l.toFixed(2)})}),(0,i.jsx)(ae.Z,{component:"th",scope:"row",children:"\ud1a4"}),(0,i.jsx)(ae.Z,{children:null===n||void 0===n?void 0:n.Tone})]}),(0,i.jsxs)(le.Z,{children:[(0,i.jsx)(ae.Z,{component:"th",scope:"row",children:"\uc8fc\uc18c"}),(0,i.jsx)(ae.Z,{colSpan:3,children:null===n||void 0===n?void 0:n.Address})]}),(0,i.jsxs)(le.Z,{children:[(0,i.jsx)(ae.Z,{component:"th",scope:"row",children:"\ube44\uace0"}),(0,i.jsx)(ae.Z,{colSpan:3,children:null===n||void 0===n?void 0:n.Note})]})]})})}),(0,i.jsx)(ce.Z,{children:(0,i.jsx)(se.Z,{onClick:r,variant:"contained",color:"secondary",children:"\ub2eb\uae30"})})]})}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function de(e,t,n,r,o,i,l){try{var a=e[i](l),c=a.value}catch(s){return void n(s)}a.done?t(c):Promise.resolve(c).then(r,o)}function pe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function l(e){de(i,r,o,l,a,"next",e)}function a(e){de(i,r,o,l,a,"throw",e)}l(void 0)}))}}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){he(e,t,n[t])}))}return e}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(c){a=!0,o=c}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||ye(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ye(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){if(e){if("string"===typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}var Ze=function(){var e=we(B.useState({open:!1,repeaterInfo:void 0}),2),t=e[0],n=e[1],r=we(B.useState(),2),c=r[0],u=r[1],f=we(B.useState(void 0),2),d=f[0],p=f[1],h=we(B.useState(void 0),2),v=h[0],w=h[1],m=we(B.useState([]),2),N=m[0],D=m[1],L=we(B.useState(null),2),Y=L[0],V=L[1],H=we(B.useState(),2),U=H[0],W=H[1],K=we(B.useState(),2),Q=K[0],ee=K[1];B.useEffect((function(){var e=new y.ZP({center:(0,s.mi)([126.9388092,37.4355672]),zoom:6,maxZoom:19}),t=new a.Z({trackingOptions:{enableHighAccuracy:!0},projection:e.getProjection()});t.setTracking(!0);var n=new S.Z;t.on("change:accuracyGeometry",(function(){n.setGeometry(t.getAccuracyGeometry()||void 0)}));var r=new S.Z;r.setStyle(new I.ZP({image:new z.Z({radius:6,fill:new R.Z({color:"#3399CC"}),stroke:new _.Z({color:"#fff",width:2})})})),t.on("change:position",(function(){var e=t.getPosition();r.setGeometry(e?new C.Z(e):void 0)}));var i=new T.Z({source:new F.Z({features:[n,r]}),zIndex:1e3}),c=new O.default({title:"\uc9c0\uc5ed\ub9dd \uc911\uacc4\uae30",layers:[]}),f=new O.default({title:"\uad11\uc5ed\ub9dd \uc911\uacc4\uae30",layers:[]});W(c),ee(f);var d=new Z.Z({target:"map",layers:[new O.default({title:"Base maps",layers:[new O.default({title:"OSM",type:"base",combine:!0,visible:!0,layers:[new A.Z({source:new E.Z({url:"https://tile.osmand.net/hd/{z}/{x}/{y}.png",crossOrigin:null,tilePixelRatio:2,maxZoom:19,tileSize:256,attributionsCollapsible:!1})})]})]}),new O.default({title:"GPS \ubcf8\uc778 \uc704\uce58",layers:[i]}),new O.default({title:"\uc911\uacc4\uae30",layers:[c,f]})],view:e,controls:(0,b.ce)().extend([new x])});d.addControl(new j.Z({units:"metric"}));var h={reverse:!1,groupSelectStyle:"children",startActive:!0,activationMode:"click"},v=new(g())(h);d.addControl(v),u(d),fetch("data/repeater.csv").then(function(){var e=pe(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:(n=e.sent)&&(r=(0,l.Z)(n),p(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),fetch("data/wa_link.json").then(function(){var e=pe(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:(n=e.sent)&&w(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),B.useEffect((function(){if(c&&v&&v.features){var e=new F.Z({features:new k.Z({dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}).readFeatures(v)}),t=new T.Z({source:e,style:new I.ZP({stroke:new _.Z({color:"#F20CEFA0",width:3})}),zIndex:100});Q&&Q.getLayers().push(t)}})),B.useEffect((function(){if(c&&d){var e=ve({},d),t=ve({},d);void 0!==e.features&&(e.features=e.features.filter((function(e){var t;return"\uad11\uc5ed\ub9dd"!==(null===e||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.Type)}))),void 0!==t.features&&(t.features=t.features.filter((function(e){var t;return"\uad11\uc5ed\ub9dd"===(null===e||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.Type)})));var n=new T.Z({source:new G.Z({source:new F.Z({features:new k.Z({dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}).readFeatures(e)})}),style:$,zIndex:200}),r=new T.Z({source:new F.Z({features:new k.Z({dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}).readFeatures(t)}),style:q,zIndex:300});U&&U.getLayers().push(n),Q&&Q.getLayers().push(r);var o=new M.Z({condition:P.V4,layers:[n,r],multi:!0,hitTolerance:10,style:J});c.addInteraction(o);o.on("select",(function(e){if(e.selected.length>0){var t=we(e.mapBrowserEvent.pixel,2),n=t[0],r=t[1],i=[];e.selected.forEach((function(e){var t,n;void 0!==e.getProperties().features?(t=i).push.apply(t,xe(e.getProperties().features.map((function(e){return e.getProperties()})))):e.length>0?(n=i).push.apply(n,xe(e.map((function(e){return e.getProperties()})))):i.push(e.getProperties())}));e.preventDefault(),D(i),V(null===Y?{mouseX:n,mouseY:r}:null),o.getFeatures().clear()}}))}}),[c,d]);return(0,i.jsxs)("div",{id:"map",style:{width:"100%",height:"100%"},children:[(0,i.jsx)(X,{contextMenu:Y,setContextMenu:V,contextMenuFeaturesData:N,setRepeaterInfo:function(e){n({open:!0,repeaterInfo:e})}}),(0,i.jsx)(ue,{open:t.open,onClose:function(){return n(ve({},t,{open:!1}))},repeaterInfo:t.repeaterInfo})]})}}}]);